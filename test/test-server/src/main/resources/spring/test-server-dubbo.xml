<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ ©2016 Rick Qian. some rights reserved.
  -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation=
               "http://www.springframework.org/schema/beans		http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
				http://code.alibabatech.com/schema/dubbo        http://code.alibabatech.com/schema/dubbo/dubbo.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <bean class="com.rick.qian.framework.config.MyPropertyPlaceholderConfigurer">
        <property name="propertiesFiles">
            <list>
                <value>G:properties/zkService.properties</value>
            </list>
        </property>
    </bean>

    <dubbo:application name="${APP_NAME}" owner="Jesse.Qian"/>

    <dubbo:registry protocol="zookeeper" address="${connectionString}" file="${user.home}/dubbo/cache/${APP_NAME}.cache"/>
    <!--需要配置本地host，因为虚拟机获得的可能不是该虚拟机的ip-->
    <dubbo:provider threads="150" executes="100" port="20989" host="${IP}" accesslog="true" filter="-exception"/>

    <!--<bean id="helloApiImpl" class="com.rick.qian.test.server.api.impl.HelloApiImpl"/>-->
    <!--<dubbo:service interface="com.rick.qian.test.api.HelloApi" ref="helloApiImpl"/>-->
    <!--<context:component-scan base-package="com.rick.qian.test.server.api.impl"/>-->
    <dubbo:annotation package="com.rick.qian.test.server.api.impl"/>


    <!-- dubbo的缺省超时时间是1秒，缺省重试为2次，check表示启动时检查提供者是否存在，true报错，false忽略-->
    <dubbo:consumer timeout="60000" retries="0" check="false"/>

    <!--生成远程对象的本地存根，每个接口的超时时间需要根据该接口的复杂情况来设置，默认为 dubbo:consumer 的timeout -->

    <!--此处的每个方法的并发度数值，需要根据部署节点的情况来分配-->
    <!-- <dubbo:monitor protocol="registry"/>  -->
</beans>