<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ ©2016 Jesse. some rights reserved.
  -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"
       xsi:schemaLocation="http://www.springframework.org/schema/beans		http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
						   http://code.alibabatech.com/schema/dubbo         http://code.alibabatech.com/schema/dubbo/dubbo.xsd">

    <bean class="com.jesse.framework.config.MyPropertyPlaceholderConfigurer">
        <property name="propertiesFiles">
            <list>
                <value>R:META-INf/zkService.META-INf</value>
            </list>
        </property>
    </bean>

    <dubbo:application name="test-server" owner="Jesse Qian"/>
    <dubbo:registry protocol="zookeeper" address="${connectionString}" file="${user.home}/dubbo/cache/dubbo.cache"/>
    <!--需要配置本地host，因为虚拟机获得的可能不是该虚拟机的ip-->
    <dubbo:provider threads="150" executes="100" port="20989" host="${LOCAL_IP}" accesslog="true" filter="-exception"/>

    <bean id="helloApiImpl" class="com.jesse.test.server.api.impl.HelloApiImpl"/>
    <dubbo:service interface="com.jesse.test.api.HelloApi" ref="helloApiImpl"/>


    <!-- dubbo的缺省超时时间是1秒，缺省重试为2次，check表示启动时检查提供者是否存在，true报错，false忽略-->
    <dubbo:consumer timeout="60000" retries="0" check="false"/>

    <!--生成远程对象的本地存根，每个接口的超时时间需要根据该接口的复杂情况来设置，默认为 dubbo:consumer 的timeout -->

    <!--此处的每个方法的并发度数值，需要根据部署节点的情况来分配-->
    <!-- <dubbo:monitor protocol="registry"/>  -->
</beans>